<h3 mat-dialog-title *ngIf="dateNull == false"> Schedule Event on - {{this.datex | date:'fullDate' }} </h3>
<h3 mat-dialog-title *ngIf="dateNull == true"> PlanEvent</h3>

<mat-dialog-content class="mat-typography">
  <div style="margin: 10px 0;"class="btn-group float-right" role="group" aria-label="Basic example">

    <button class="   btn btn-primary"  (click) ='scheduleEvent()' > Schedule Event</button>
  <button class="   btn btn-primary"  (click) ='sendMessage()' > Add Task</button>
</div>
  <br>

<div class="" *ngIf="this.showScheduler== true">
  <div class="container-fluid " style="padding:20px">

    <table class="example-full-width" cellspacing='0'>
      <tr>
        <td>
          <mat-form-field class="example-full-width">
            <input matInput placeholder="Title" value=" Event on {{clickedDate}}">
          </mat-form-field>

  </td>
      <td>

        <mat-form-field >
          <input matInput [matDatepicker]="picker1" placeholder="Date" [(ngModel)]="datex">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
</td>

      <td style='width:20%' >
        <mat-form-field   >
          <input matInput  type='number' placeholder="Duration" >
        </mat-form-field>
</td>
<td>
        <mat-form-field>
    <mat-select placeholder="Click to Edit" [(value)]="selected">
      <mat-option value="Minutes">Minutes</mat-option>
      <mat-option value="Hours">Hours</mat-option>
      <mat-option value="FullDay">FullDay</mat-option>
    </mat-select>
  </mat-form-field>

</td>
    </tr>

    </table>

    <mat-form-field class="example-full-width">
  <mat-label>Description</mat-label>
  <textarea matInput
            cdkTextareaAutosize
            #autosize="cdkTextareaAutosize"
            cdkAutosizeMinRows="2"
            cdkAutosizeMaxRows="7"></textarea>
</mat-form-field>

<table>
  <tr>
    <td><mat-form-field>
  <mat-select placeholder="Prioity" [(value)]="selected">
    <mat-option>None</mat-option>
    <mat-option value="option1">Option 1</mat-option>
    <mat-option value="option2">Option 2</mat-option>
    <mat-option value="option3">Option 3</mat-option>
  </mat-select>
</mat-form-field></td>

<td>
  <ng-multiselect-dropdown
[placeholder]="'custom placeholder'"
[data]="dropdownList"
[(ngModel)]="selectedItems"
[settings]="dropdownSettings"
(onSelect)="onItemSelect($event)"
(onSelectAll)="onSelectAll($event)">
</ng-multiselect-dropdown>

</td>

  </tr>
</table>

    <!-- <div class="btn-group float-center">
      <button class="btn" name="button">Cancel</button>
      <button class="btn" name="button">CheckAvailability</button>

    </div> -->
  </div>

</div>
<div *ngIf="this.showEvents == false && this.showScheduler==false">
    <h3 style="color:red"> NoEvents! </h3>
</div>

<div *ngIf="this.showEvents===true">
  <table class="table table-bordered">

    <thead>
      <tr>
        <th>Title</th>
        <th>Starts at</th>
        <th>Ends at</th>
        <th> With </th>
        <th>Actions</th>

      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let event of events; let index = index">
        <td>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="event.title"
            (keyup)="refresh.next()">
        </td>
        <td>
          <input
            class="form-control"
            type="text"
            mwlFlatpickr
            [(ngModel)]="event.start"
            (ngModelChange)="refresh.next()"
            [altInput]="true"
            [convertModelValue]="true"
            [enableTime]="true"
            dateFormat="Y-m-dTH:i"
            altFormat="F j, Y H:i"
            placeholder="Not set">
        </td>
        <td>
          <input
            class="form-control"
            type="text"
            mwlFlatpickr
            [(ngModel)]="event.end"
            (ngModelChange)="refresh.next()"
            [altInput]="true"
            [convertModelValue]="true"
            [enableTime]="true"
            dateFormat="Y-m-dTH:i"
            altFormat="F j, Y H:i"
            placeholder="Not set">
        </td>
        <td>
          <ng-multiselect-dropdown
  [placeholder]="Invitee"
  [data]="dropdownList"
  [(ngModel)]="event.with"
  [settings]="dropdownSettings"
  (onSelect)="onItemSelect($event)"
  (onSelectAll)="onSelectAll($event)">
</ng-multiselect-dropdown>

        </td>
        <td>
          <i class="fa fa-fw fa-times" (click)="events.splice(index, 1); refresh.next(); id= id-1;"></i>
        </td>
      </tr>
    </tbody>

  </table>

</div>

 </mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>Cancel</button>
  <button mat-button *ngIf="showScheduler == false" (click) ='sendMessage()'  [mat-dialog-close]="true" cdkFocusInitial>Done</button>
  <button mat-button *ngIf="showScheduler == true" cdkFocusInitial name="button">CheckAvailability</button>

</mat-dialog-actions>
